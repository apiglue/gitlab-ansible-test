default:
  image:
    name: alpine/ansible
    entrypoint: [""]
  timeout: 15 minutes
  tags:
    - ansible

stages:
  - ansible-check-a
  - ansible-check-b

trigger_a:
  stage: ansible-check-a
  rules:
    - changes:
        - roles/a/**/*
  script:
    - ansible-playbook --check -i inventory.yml playbook-a.yml

trigger_b:
  stage: ansible-check-b
  rules:
    - changes:
        - roles/b/**/*
  script:
    - ansible-playbook --check -i inventory.yml playbook-b.yml
