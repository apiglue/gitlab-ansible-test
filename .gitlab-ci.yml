default:
  image:
    name: alpine/ansible
    entrypoint: [""]
  timeout: 15 minutes
  tags:
    - ansible

stages:
  - ansible-check-a
  - ansible-check-b

trigger_a:
  stage: ansible-check-a
  trigger:
    include:
      - local: roles/a/.gitlab-ci.yml
      - local: ./playbook-a.yml
  rules:
    - changes:
        - roles/a/**/*

trigger_b:
  stage: ansible-check-b
  trigger:
    include:
      - local: roles/b/.gitlab-ci.yml
      - local: ./playbook-b.yml
  rules:
    - changes:
        - roles/b/**/*
